<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tool Manager Pro</title>
  <style>
    /* your CSS unchanged */
  </style>
</head>
<body>
  <div class="container">

    <!-- Login Screen -->
    <div id="login-screen" class="login-container">
      <div class="header">
        <h1>ðŸ”§ Tool Manager Pro</h1>
        <p>Professional Tool Management System</p>
      </div>

      <form id="login-form">
        <div class="form-group">
          <label for="username">Username</label>
          <input type="text" id="username" placeholder="Enter username" required>
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" placeholder="Enter password" required>
        </div>
        <button type="submit" class="btn btn-primary">Login</button>
        <button type="button" class="btn btn-warning" onclick="skipLogin()">Skip Login (Demo)</button>

      <div style="margin-top: 15px; font-size: 12px; color: #666;">
        <p><strong>Demo Accounts:</strong></p>
        <p>user / user123</p>
        <p>admin / admin123</p>
        <p>Or use Skip Login!</p>
      </div>
    </div>

    <!-- Main Application -->
    <div id="main-app" class="hidden">
      <div class="header">
        <h1>ðŸ”§ Tool Manager Pro</h1>
        <p>Professional Tool Management</p>
      </div>

      <div class="user-info">
        <div>
          <span class="user-name" id="current-user"></span>
          <span class="user-role" id="user-role"></span>
        </div>
        <button class="logout-btn" onclick="logout()">Logout</button>
      </div>

      <div class="tabs" id="main-tabs">
        <button class="tab active" onclick="showTab(event,'checkout')">Check Out</button>
        <button class="tab" onclick="showTab(event,'checkin')">Check In</button>
        <button class="tab" onclick="showTab(event,'inventory')">Inventory</button>
        <button class="tab" onclick="showTab(event,'maintenance')">Maintenance</button>
        <button class="tab" onclick="showTab(event,'reports')">Reports</button>
      </div>

      <!-- Admin Tabs -->
      <div class="tabs hidden" id="admin-tabs">
        <button class="tab" onclick="showTab(event,'admin')">Admin</button>
        <button class="tab" onclick="showTab(event,'users')">Users</button>
        <button class="tab" onclick="showTab(event,'database')">Database</button>
      </div>

      <div id="alert-container"></div>

      <!-- (All your tab content sections stay unchanged: checkout, checkin, inventory, maintenance, reports, admin, users, database) -->

    </div>
  </div>

  <!-- Modals (photo modal, add tool modal) -->
  <!-- unchanged except backticks removed -->

  <!-- Supabase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.0/dist/umd/supabase.min.js"></script>

  <script>
    // Supabase config
    const SUPABASE_URL = 'https://eowwsyxbcskiyixhubnz.supabase.co';
    const SUPABASE_ANON_KEY = 'YOUR_KEY_HERE';
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // ===== Global state, users, tools, transactions, functions etc. =====
    // âœ… Use handleLogin + skipLogin only (removed tryLogin)
    // âœ… showTab(event, tabName) fixed to accept event

    // (All the JS you already have stays the same, except:)
    function showTab(event, tabName) {
      const contents = document.querySelectorAll('.tab-content');
      contents.forEach(c => c.classList.remove('active'));

      const tabs = document.querySelectorAll('.tab');
      tabs.forEach(t => t.classList.remove('active'));

      const targetTab = document.getElementById(tabName);
      if (targetTab) targetTab.classList.add('active');
      if (event) event.target.classList.add('active');

      updateDropdowns();
      updateInventory();
      updateStats();
      if (tabName === 'maintenance') updateMaintenanceSchedule();
      if (tabName === 'reports') generateReport();
      if (tabName === 'users' && userRole === 'admin') updateUsersList();
      if (tabName === 'database' && userRole === 'admin') checkDatabaseConnection();
    }

    function skipLogin() {
      currentUser = 'demo-user';
      userRole = 'user';
      document.getElementById('login-screen').classList.add('hidden');
      document.getElementById('main-app').classList.remove('hidden');
      updateUserInterface();
      showAlert('Logged in as demo user!', 'function updateUserInterface() {
  document.getElementById('current-user').textContent = currentUser;
  document.getElementById('user-role').textContent = userRole.toUpperCase();

  const adminTabs = document.getElementById('admin-tabs');
  if (userRole === 'admin') {
    adminTabs.classList.remove('hidden');
  } else {
    adminTabs.classList.add('hidden');
  }

  updateDropdowns();
  updateInventory();
  updateStats();
  updateMaintenanceSchedule();
}

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      checkAuthStatus();
      document.getElementById('login-form').addEventListener('submit', handleLogin);
      document.getElementById('checkout-form').addEventListener('submit', handleCheckout);
      document.getElementById('checkin-form').addEventListener('submit', handleCheckin);
      document.getElementById('add-tool-form').addEventListener('submit', handleAddTool);
      document.getElementById('search-tools').addEventListener('input', updateInventory);
      document.getElementById('filter-category').addEventListener('change', updateInventory);
      document.getElementById('filter-status').addEventListener('change', updateInventory);
    });
  </script>
</body>
</html>